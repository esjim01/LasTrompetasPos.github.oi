<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Inventario - Las Trompetas</title>
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css">
    <link rel="stylesheet" href="/public/css/styles.css">
</head>
<body class="dashboard-body"> <nav class="dashboard-nav z-depth-0">
        <div class="nav-wrapper container">
            <a href="#" class="brand-logo"><i class="material-icons left">inventory_2</i>Inventario</a>
            <ul class="right hide-on-med-and-down">
                <li><a href="/public/dashboard.html" class="nav-link"><i class="material-icons left">analytics</i>Dashboard</a></li>
                <li><a href="/public/usuarios.html" class="nav-link"><i class="material-icons left">group</i>Usuarios</a></li>
                <li><a href="/public/ventas.html" class="btn indigo darken-4 waves-effect waves-light" style="border-radius: 8px;"><i class="material-icons left">point_of_sale</i>Ventas</a></li>
                <li><a href="#" onclick="cerrarSesion()" class="nav-link red-text"><i class="material-icons">logout</i></a></li>
            </ul>
        </div>
    </nav>

    <div class="container main-container">
        <div class="row">
            
            <div class="col s12 l4">
                <div class="card filter-card"> <div class="card-content">
                        <span class="card-title-small center-align">✨ Nuevo Producto</span>
                        
                        <div class="input-field">
                            <i class="material-icons prefix indigo-text">label</i>
                            <input type="text" id="nombre">
                            <label for="nombre">Nombre del Producto</label>
                        </div>

                        <div class="input-field">
                            <i class="material-icons prefix indigo-text">category</i>
                            <select id="categoria">
                                <option value="" disabled selected>Selecciona Categoría</option>
                                <option value="Cervezas">Cervezas</option>
                                <option value="Rones">Rones</option>
                                <option value="Aguardientes">Aguardientes</option>
                                <option value="Whisky">Whisky</option>
                                <option value="Gaseosas">Gaseosas</option>
                                <option value="Otros">Otros</option>
                            </select>
                        </div>

                        <div class="row" style="margin-bottom: 0;">
                            <div class="input-field col s6">
                                <input type="number" id="cantidad">
                                <label for="cantidad">Stock Inicial</label>
                            </div>
                            <div class="input-field col s6">
                                <input type="number" id="precio">
                                <label for="precio">P. Venta</label>
                            </div>
                        </div>

                        <div class="input-field">
                            <i class="material-icons prefix green-text">attach_money</i>
                            <input type="number" id="costo">
                            <label for="costo">Costo (Inversión)</label>
                        </div>

                        <div class="file-field input-field">
                            <div class="btn-small indigo lighten-5 indigo-text text-darken-4" style="border: 1px solid #c5cae9; box-shadow:none; border-radius: 8px; width:100%">
                                <span><i class="material-icons left">cloud_upload</i>Subir Foto</span>
                                <input type="file" id="input-imagen" accept="image/*">
                            </div>
                            <div class="file-path-wrapper">
                                <input class="file-path validate" type="text" placeholder="Ningún archivo seleccionado">
                            </div>
                        </div>

                        <img id="preview-img" src="" alt="" style="display:none; width:100%; max-height:150px; object-fit:contain; margin:10px 0; border-radius:10px; border: 2px dashed #ddd;">

                        <button class="btn-large indigo darken-4 waves-effect waves-light w100" style="width:100%; border-radius:10px; margin-top:15px; box-shadow: 0 4px 15px rgba(26, 35, 126, 0.3);" onclick="guardarProducto()">
                            Guardar Producto
                        </button>
                    </div>
                </div>
            </div>

            <div class="col s12 l8">
                <div class="card search-bar-container" style="border-radius: 12px;">
                    <div class="input-field" style="margin:0;">
                        <i class="material-icons prefix indigo-text">search</i>
                        <input type="text" id="busqueda-venta" onkeyup="filtrarProductos()" placeholder="Buscar por nombre o categoría...">
                    </div>
                </div>

                <div class="card chart-card">
                    <div class="card-content" style="padding: 0;">
                        <table class="highlight responsive-table" style="margin-top: 0;">
                            <thead style="background-color: #f5f5f5;">
                                <tr>
                                    <th style="padding-left: 20px;">Producto</th>
                                    <th>Categoría</th>
                                    <th class="center">Stock</th>
                                    <th>Precio</th>
                                    <th>Costo</th>
                                    <th class="center">Acciones</th>
                                </tr>
                            </thead>
                            <tbody id="tabla-cuerpo">
                                </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>

        <div class="row" style="margin-top: 30px;">
            <div class="col s12">
                <div class="card chart-card">
                    <div class="card-header">
                        <span class="card-title-small"><i class="material-icons left">history</i>Movimientos Recientes</span>
                    </div>
                    <div class="card-content">
                        <table class="highlight">
                            <thead>
                                <tr>
                                    <th>Fecha</th>
                                    <th>Usuario</th>
                                    <th>Detalle</th>
                                    <th>Total</th>
                                    <th>Acción</th>
                                </tr>
                            </thead>
                            <tbody id="tabla-historial"></tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div id="modal-editar" class="modal" style="border-radius: 20px;">
        <div class="modal-content">
            <h5 class="indigo-text text-darken-4"><b>Editar Producto</b></h5>
            <p class="grey-text">Modifica los detalles del inventario</p>
            <br>
            <div class="row">
                <input type="hidden" id="edit-nombre-original">
                
                <div class="input-field col s12 m6">
                    <input type="text" id="edit-nombre">
                    <label class="active" for="edit-nombre">Nombre</label>
                </div>
                
                <div class="input-field col s12 m6">
                    <select id="edit-categoria">
                        <option value="Cervezas">Cervezas</option>
                        <option value="Rones">Rones</option>
                        <option value="Aguardientes">Aguardientes</option>
                        <option value="Whisky">Whisky</option>
                        <option value="Comida">Comida</option>
                        <option value="Otros">Otros</option>
                    </select>
                    <label>Categoría</label>
                </div>

                <div class="input-field col s4">
                    <input type="number" id="edit-cantidad">
                    <label class="active" for="edit-cantidad">Stock</label>
                </div>
                <div class="input-field col s4">
                    <input type="number" id="edit-precio">
                    <label class="active" for="edit-precio">Venta</label>
                </div>
                <div class="input-field col s4">
                    <input type="number" id="edit-costo">
                    <label class="active" for="edit-costo">Costo</label>
                </div>
            </div>
        </div>
        <div class="modal-footer container-botones">
            <button class="modal-close btn-flat grey lighten-3 btn-modal">Cancelar</button>
            <button class="btn green darken-1 btn-modal" onclick="actualizarProducto()">
                Guardar
            </button>
        </div>
    </div>

    <div id="modal-eliminar" class="modal" style="width: 400px; border-radius: 20px;">
        <div class="modal-content center-align">
            <i class="material-icons large red-text text-lighten-2">warning</i>
            <h5>¿Eliminar Producto?</h5>
            <p id="nombre-eliminar-display" class="bold indigo-text"></p>
            <p class="grey-text small">Esta acción no se puede deshacer.</p>
            <input type="hidden" id="nombre-eliminar-hidden">
        </div>
        <div class="modal-footer container-botones">
            <button class="modal-close btn-flat grey lighten-3 btn-modal">Cancelar</button>
            <button class="btn red accent-4 btn-modal" onclick="confirmarBorrado()">Eliminar</button>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>
    <script src="/public/js/inventory.js"></script>
</body>
</html>